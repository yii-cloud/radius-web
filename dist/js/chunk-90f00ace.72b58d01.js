(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90f00ace"],{"5d6b":function(e,r,t){var a=t("e53d").parseInt,o=t("a1ce").trim,i=t("e692"),n=/^[-+]?0[xX]/;e.exports=8!==a(i+"08")||22!==a(i+"0x16")?function(e,r){var t=o(String(e),3);return a(t,r>>>0||(n.test(t)?16:10))}:a},7445:function(e,r,t){var a=t("63b6"),o=t("5d6b");a(a.G+a.F*(parseInt!=o),{parseInt:o})},"95c0":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("a-layout-content",{staticStyle:{margin:"0 16px"}},[t("a-breadcrumb",{staticStyle:{margin:"16px 0"}},[t("a-breadcrumb-item",[e._v("用户管理")]),t("a-breadcrumb-item",[e._v("添加用户")])],1),t("div",{class:"content-div"},[t("a-form",{style:{width:"800px",margin:"auto auto"},attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"用户名","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入用户名!"}]}],expression:"[\n            'username',\n            {rules: [{ required: true, message: '请输入用户名!' }]}\n          ]"}],attrs:{placeholder:"请输入用户名"}})],1),t("a-form-item",{attrs:{label:"密码","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{message:"请输入密码!",min:6}]}],expression:"[\n                        'password',\n                        {rules: [{message: '请输入密码!', min: 6 }]}\n                        ]"}],attrs:{type:"password",placeholder:"请输入密码"}})],1),t("a-form-item",{attrs:{label:"真实姓名","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName",{rules:[{required:!0,message:"请输入姓名!"}]}],expression:"[\n        'realName',\n        {rules: [{ required: true, message: '请输入姓名!' }]}\n      ]"}],attrs:{placeholder:"请输入姓名"}})],1),t("a-form-item",{attrs:{label:"订购套餐","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["productId",{rules:[{required:!0,message:"请选择套餐!"}]}],expression:"[\n        'productId',\n        {rules: [{ required: true, message: '请选择套餐!' }]}\n      ]"}],attrs:{placeholder:"请选择套餐"},on:{change:e.productSelected}},e._l(e.products,function(r){return t("a-select-option",{key:r.id,attrs:{value:r.id,type:r.type,serviceMonth:r.serviceMonth,product:r}},[e._v(e._s(r.name))])}),1)],1),t("a-form-item",{attrs:{hidden:!e.isMonthy,label:"套餐倍数","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["count",{rules:[{required:!0,message:"套餐倍数必须是大于0的整数，默认1",validator:e.validateCount}],initialValue:1}],expression:"[\n        'count',\n        {rules: [{ required: true, message: '套餐倍数必须是大于0的整数，默认1',\n                    validator: validateCount}], \n                    initialValue: 1 }\n      ]"}],attrs:{placeholder:"套餐倍数，默认1"},on:{blur:function(r){return e.countChanged()}}})],1),t("a-form-item",{attrs:{"label-col":{span:5},"wrapper-col":{span:12}}},[t("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n          到期时间\n          "),t("a-tooltip",{attrs:{title:"流量和时长套餐可选择套餐使用的截止时间,不选择则使用套餐默认值(当日,当月,无限)！"}},[t("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["expireTime",{initialValue:e.expire,rules:[{type:"object"}]}],expression:"['expireTime', {initialValue: expire,rules: [{ type: 'object'}]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"选填,到期时间"}})],1),t("a-form-item",{attrs:{label:"价格","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{initialValue:e.price}],expression:"[\n        'price', {initialValue: price}\n      ]"}],attrs:{placeholder:"价格"}})],1),t("a-form-item",{attrs:{label:"静态IP地址","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["framedIpAddr"],expression:"[\n        'framedIpAddr'\n      ]"}],attrs:{placeholder:"选填，静态IP地址"}})],1),t("a-form-item",{attrs:{label:"手机号码","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"[\n        'mobile'\n      ]"}],attrs:{placeholder:"选填，手机号码"}})],1),t("a-form-item",{attrs:{label:"电子邮件","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email"],expression:"[\n            'email'\n           ]"}],attrs:{placeholder:"选填，电子邮件"}})],1),t("a-form-item",{attrs:{label:"装机地址","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["installedAddr",{rules:[{required:!0,message:"请输入装机地址!"}]}],expression:"[\n        'installedAddr',\n        {rules: [{ required: true, message: '请输入装机地址!' }]}\n      ]"}],attrs:{row:3,placeholder:"请输入装机地址"}})],1),t("a-form-item",{attrs:{label:"描述","label-col":{span:5},"wrapper-col":{span:12}}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description"],expression:"[\n        'description'\n      ]"}],attrs:{row:3,placeholder:"选填，描述"}})],1),t("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[t("a-button",{staticStyle:{width:"100%"},attrs:{type:"primary","html-type":"submit"}},[e._v("提交")])],1)],1)],1)],1)},o=[],i=t("e814"),n=t.n(i),s=t("c1df"),l=t.n(s),c={data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this),products:[],count:1,isMonthy:!1,expire:null,productServiceMonth:0,product:null,price:null}},methods:{fetchProducts:function(){var e=this;this.axios.post(this.CONFIG.apiUrl+"/fetch/product",{}).then(function(r){e.products=r.data.data})},handleSubmit:function(e){var r=this;e.preventDefault(),this.form.validateFields(function(e,t){var a=t["expireTime"];null!=a&&(a=a.format("YYYY-MM-DD HH:mm:ss"),t["expireTime"]=a),e||(t["count"]=n()(t["count"]),r.axios.post(r.CONFIG.apiUrl+"/user/add",t).then(function(e){alert(e.data.message),1!=e.data.code&&r.$router.push("/user")}).catch(function(){}))})},productSelected:function(e,r){if(this.product=r.data.attrs.product,this.price=this.product.price/100,1==r.data.attrs.type){this.isMonthy=!0;var t=r.data.attrs.serviceMonth;this.productServiceMonth=t;var a=l()().add(t,"M");this.expire=a}else this.isMonthy=!1,this.form.setFieldsValue({count:1}),this.expire=null},countChanged:function(){var e=this.form.getFieldValue("count");if(0==this.productServiceMonth||isNaN(e)||"0"==e)this.expire=null;else{var r=n()(e);this.price=this.price*r;var t=this.productServiceMonth*r,a=l()().add(t,"M");this.expire=a}},validateCount:function(e,r,t){if(isNaN(r)||r<=0)return t("必须是数字并且大于0"),void(this.expire=null);t()}},mounted:function(){this.fetchProducts()}},p=c,u=t("2877"),d=Object(u["a"])(p,a,o,!1,null,null,null);r["default"]=d.exports},a1ce:function(e,r,t){var a=t("63b6"),o=t("25eb"),i=t("294c"),n=t("e692"),s="["+n+"]",l="​",c=RegExp("^"+s+s+"*"),p=RegExp(s+s+"*$"),u=function(e,r,t){var o={},s=i(function(){return!!n[e]()||l[e]()!=l}),c=o[e]=s?r(d):n[e];t&&(o[t]=c),a(a.P+a.F*s,"String",o)},d=u.trim=function(e,r){return e=String(o(e)),1&r&&(e=e.replace(c,"")),2&r&&(e=e.replace(p,"")),e};e.exports=u},b9e9:function(e,r,t){t("7445"),e.exports=t("584a").parseInt},e692:function(e,r){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(e,r,t){e.exports=t("b9e9")}}]);
//# sourceMappingURL=chunk-90f00ace.72b58d01.js.map